<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Managed plug-ins</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://docs.unity3d.com/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1586228985"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1586228985"></script><script type="text/javascript" src="docdata/toc.js?ts=1586228985"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1586228985"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1586228985">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="DocsAnalyticsData" data-area="core" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2019.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UsingDLL.html">English</a></li>
<li><a href="/ja/current/Manual/UsingDLL.html">日本語</a></li>
<li><a href="/es/current/Manual/UsingDLL.html">Español</a></li>
<li><a href="/kr/current/Manual/UsingDLL.html">한국어</a></li>
<li><a href="/ru/current/Manual/UsingDLL.html">Русский</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2019.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/UsingDLL.html">English</a></li>
<li><a href="/ja/current/Manual/UsingDLL.html">日本語</a></li>
<li><a href="/es/current/Manual/UsingDLL.html">Español</a></li>
<li><a href="/kr/current/Manual/UsingDLL.html">한국어</a></li>
<li><a href="/ru/current/Manual/UsingDLL.html">Русский</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2019.3)</a></li>
<li><a href="ScriptingSection.html">Scripting</a></li>
<li><a href="Plugins.html">Plug-ins</a></li>
<li>Managed plug-ins</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="PluginInspector.html"></a></span><div class="tip">Plugin Inspector</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="NativePlugins.html"></a></span><div class="tip">Native plug-ins</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Managed plug-ins</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Managed plug-ins are managed .NET assemblies that you create with tools like Visual Studio. They contain only .NET code which means that they can’t access any features that .NET libraries do not support. However, the standard .NET tools that Unity uses to compile <span class="tooltip"><strong>scripts</strong><span class="tooltiptext">A piece of code that allows you to create your own Components, trigger game events, modify Component properties over time and respond to user input in any way you like. <a href="CreatingAndUsingScripts.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Scripts">Glossary</a></span></span></span> can access the managed code. Therefore, there isn’t a lot of difference in usage between managed <span class="tooltip"><strong>plug-in</strong><span class="tooltiptext">A set of code created outside of Unity that creates functionality in Unity. There are two kinds of plug-ins you can use in Unity: Managed plug-ins (managed .NET assemblies created with tools like Visual Studio) and Native plug-ins (platform-specific native code libraries). <a href="Plugins.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Plug-in">Glossary</a></span></span></span> code and Unity script code, except that plug-ins are compiled outside of Unity and so the source might not be available.</p>

<p>Usually, Unity keeps scripts in a Project as source files and compiles them whenever the source changes. However, you can use an external compiler to compile a script to a dynamically linked library (DLL). You can then add the .dll file to the Project and attach the classes it contains to <span class="tooltip"><strong>GameObjects</strong><span class="tooltiptext">The fundamental object in Unity scenes, which can represent characters, props, scenery, cameras, waypoints, and more. A GameObject’s functionality is defined by the Components attached to it. <a href="class-GameObject.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#GameObject">Glossary</a></span></span></span> just like normal scripts. A compiled DLL is known as a <strong><span class="tooltip"><strong>managed plug-in</strong><span class="tooltiptext">A managed .NET assembly that is created with tools like Visual Studio for use in Unity. <a href="Plugins.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Managedplug-in">Glossary</a></span></span></span></strong> in Unity.</p>

<p>It’s generally much easier to work with scripts than DLLs in Unity. However, you might want to use compilers in your code that Unity doesn’t support, or add third party Mono code in a .dll file, or you might want to supply Unity code without the source. Creating and adding a .dll file to your Unity Project is the easiest way to get around these limitations.</p>

<h2>Creating a managed plug-in</h2>

<p>To create a managed plug-in, you need to create a DLL, which you need a suitable compiler for. Not all compilers that produce .NET code are guaranteed to work with Unity, so you should test the compiler with some available code before doing significant work with it. If the DLL contains no code that depends on the Unity API then you can use the appropriate compiler options to compile it to a .dll file. </p>

<p>If you do want to use the Unity API then you need to make Unity’s own DLLs available to the compiler. On macOS, the DLLs are contained in the application bundle. To see them, find the <code>Unity.app</code> file on your computer (<code>Applications/Unity/Hub/Editor/[Version Number]/Unity.app</code>) and then right click on <code>Unity.app</code> and select <strong>Show Package Contents</strong>.</p>

<p>On macOS the path to the Unity DLLs are:</p>

<pre><code>/Applications/Unity/Unity.app/Contents/Managed/UnityEngine
</code></pre>

<p>On Windows the path to the Unity DLLs are:</p>

<pre><code>C:\Program Files\Unity\Editor\Data\Managed\UnityEngine
</code></pre>

<p>The <code>UnityEngine</code> folder contains the .dll files for a number of modules that you can reference to get to the specific namespace you require. Additionally, some namepsaces require a reference to a compiled library from a Unity Project (for instance, <code>UnityEngine.UI</code>), which is located in the project folder’s directory:</p>

<pre><code>~\Library\ScriptAssemblies
</code></pre>

<p>The exact options for compiling the DLL will vary depending on the compiler you use. As an example, the command line for the Mono C# compiler, <code>mcs</code>, might look like this on macOS:</p>

<pre><code><span class="tooltip">__mcs__<span class="tooltiptext">The Mono C# compiler file format. [More info](PlatformDependentCompilation.html)&lt;span class=&quot;tooltipGlossaryLink&quot;&gt;See in [Glossary](Glossary.html#mcs)&lt;/span&gt;</span></span> -r:/Applications/Unity/Unity.app/Contents/Managed/UnityEngine/UnityEngine.UIModule.dll -target:library ClassesForDLL.cs 
</code></pre>

<p>In this example,, the <code>-r</code> option specifies a path to a library to include in the build; in this case the <code>UnityEngine.UIModule</code> library. The <code>-target</code> option specifies which type of build is required; the word “library” is signifies a DLL build. Finally, the name of the source file to compile is <code>ClassesForDLL.cs</code>. The compiler assumes that this file is in the current working folder, but you can use a full path to specify the file if necessary. The resulting .dll file appears in the same folder as the source file.</p>

<h2>Using the managed plug-in</h2>

<p>Once you’ve compiled the DLL, you can drag the .dll file into the Unity Project like any other Asset. The managed plug-in has a foldout triangle which you can use to reveal the separate classes inside the library. You can drag classes that derive from <code>MonoBehaviour</code> onto Game Objects like ordinary scripts. You can use non-<code>MonoBehaviour</code> classes directly from other scripts in the usual way.</p>

<figure>
<img src="../uploads/Main/DLLScreenshot.png" alt="A folded-out DLL with the classes visible">
<figcaption>A folded-out DLL with the classes visible</figcaption>
</figure>

<h2>Step by step guide for Visual Studio</h2>

<p>This section explains how to build and integrate a simple DLL example with Visual Studio, and also how to prepare a debugging session for the DLL.</p>

<h3>Setting Up the Project</h3>

<p>Open Visual Studio and create a new project. Select <strong>File &gt; New &gt; Project</strong> and then choose <strong>Visual C# &gt; Class Library</strong>.</p>

<p>Complete the following information for the new library:</p>

<ul>
<li>
<strong>Name</strong> is the namespace (for this example use <code>DLLTest</code> as the name).</li>
<li>
<strong>Location</strong> is the parent folder of the project.</li>
<li>
<strong>Solution name</strong> is the folder of the project.</li>
</ul>

<p>Next, add references to the Unity DLLs. In Visual Studio, open the contextual menu for <strong>References</strong> in the Solution Explorer and select <strong>Add Reference</strong>. Then, select <strong>Browse &gt; Select File</strong>.</p>

<p>At this stage, select the required .dll file, located in the <code>UnityEngine</code> folder. </p>

<h3>Code</h3>

<p>For this example, rename the class to <code>MyUtilities</code> in the Solution browser and replace its code with the following:</p>

<pre><code>using System;   
using UnityEngine;

namespace DLLTest {

    public class MyUtilities {
    
        public int c;

        public void AddValues(int a, int b) {
            c = a + b;  
        }
    
        public static int GenerateRandom(int min, int max) {
            System.Random rand = new System.Random();
            return rand.Next(min, max);
        }
    }
}
</code></pre>

<p>With the code in place, build the project to generate the DLL file along with its debug symbols.</p>

<h3>Using the DLL in Unity</h3>

<p>Create a new Project in Unity and copy the built file <code>&lt;project folder&gt;/bin/Debug/DLLTest.dll</code> into the Assets folder. Then, create a C# script called <code>Test</code> in <code>Assets</code>, and replace its contents with the following code:</p>

<pre><code>using UnityEngine;
using System.Collections;
using DLLTest;

public class Test : MonoBehaviour {

     void Start () {
        MyUtilities utils = new MyUtilities();
        utils.AddValues(2, 3);
        print(&quot;2 + 3 = &quot; + utils.c);
     }
    
     void Update () {
        print(MyUtilities.GenerateRandom(0, 100));
     }
}
</code></pre>

<p>Attach this script to a GameObject in the <span class="tooltip"><strong>Scene</strong><span class="tooltiptext">A Scene contains the environments and menus of your game. Think of each unique Scene file as a unique level. In each Scene, you place your environments, obstacles, and decorations, essentially designing and building your game in pieces. <a href="CreatingScenes.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Scene">Glossary</a></span></span></span> and press Play, and Unity displays the output of the code from the DLL in the <span class="tooltip"><strong>Console window</strong><span class="tooltiptext">A Unity Editor window that shows errors, warnings and other messages generated by Unity, or your own scripts. <a href="Console.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Consolewindow">Glossary</a></span></span></span>.</p>

<h3>Setting up a debugging session for the DLL</h3>

<p>To set up a debugging session you need to prepare the debug symbols for the DLL. In Visual Studio, execute in the command prompt and pass <code>&lt;project folder&gt;\bin\Debug\DLLTest.pdb</code> as a parameter:</p>

<pre><code>Program Files\Unity\Editor\Data\Mono\lib\mono\2.0\pdb2mdb.exe
</code></pre>

<p>Copy the converted file <code>&lt;project folder&gt;\bin\Debug\DLLTest.dll.mdb</code> into <code>Assets/Plugins</code>.</p>

<p>With this setup completed, you can debug code that uses the DLL in Unity in the usual way. See the <a href="ScriptingTools.html">Scripting Tools</a> section for further information about debugging.</p>

<h3>Compiling ‘unsafe’ C# code</h3>

<p>To enable support for compiling <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/unsafe">unsafe C# code</a> go to <strong>Edit</strong> &gt; <span class="tooltip"><strong>Project Settings</strong><span class="tooltiptext">A broad collection of settings which allow you to configure how Physics, Audio, Networking, Graphics, Input and many other areas of your Project behave. <a href="comp-ManagerGroup.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#ProjectSettings">Glossary</a></span></span></span> &gt; <strong>Player</strong>. Expand the <strong>Other Settings</strong> panel and enable the <strong>Allow Unsafe Code</strong> checkbox. </p>
<!-- area:core -->
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="PluginInspector.html"></a></span><div class="tip">Plugin Inspector</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="NativePlugins.html"></a></span><div class="tip">Native plug-ins</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2020 Unity Technologies. Publication Date: 2020-04-07.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
