<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script><link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual:  Gradle for Android</title>
<meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript" src="https://docs.unity3d.com/StaticFilesConfig/UnityVersionsInfo.js"></script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js?ts=1586228985"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js?ts=1586228985"></script><script type="text/javascript" src="docdata/toc.js?ts=1586228985"></script><script type="text/javascript" src="docdata/global_toc.js?ts=1586228985"></script><link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css?ts=1586228985">
<link rel="stylesheet" href="../StaticFilesManual/css/prism.css">
<script src="../StaticFilesManual/js/prism.js"></script><script src="/StaticFilesConfig/feedback/feedback.js"></script><script src="../StaticFilesManual/js/jquery.sidebar.min.js"></script><link rel="stylesheet" href="../StaticFilesManual/css/mobileoptimisation.css">
<script src="../StaticFilesManual/js/mobileoptimisation.js"></script>
</head>
<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<div id="DocsAnalyticsData" data-area="platforms" data-pagetype="manual"></div>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div id="nav-open" for="nav-input"><span></span></div>
<div class="logo"><a href="https://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="https://unity.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content">
<div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>2019.3</b><div class="otherversionscontent" id="OtherVersionsContent" style="display: none;">
<ul id="OtherVersionsContentUl"></ul>
<div id="otherVersionsLegend"><ul>
<li>
<div id="supportedColour" class="legendBox"></div>Supported</li>
<li>
<div id="notFoundColour" class="legendBox"></div>Legacy</li>
</ul></div>
</div>
<div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div>
</div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/android-gradle-overview.html">English</a></li>
<li><a href="/ja/current/Manual/android-gradle-overview.html">日本語</a></li>
<li><a href="/es/current/Manual/android-gradle-overview.html">Español</a></li>
<li><a href="/kr/current/Manual/android-gradle-overview.html">한국어</a></li>
<li><a href="/ru/current/Manual/android-gradle-overview.html">Русский</a></li>
</ul></div>
</div></div>
</div></div>
<div class="mobileLogo"><a href="https://docs.unity3d.com"></a></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc" id="customScrollbar">
<h2>Unity Manual</h2>
<div class="search-form sidebar-search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" id="mobileSearchBtn" class="submit" value="Search">
</form></div>
<div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent"><form id="otherVersionsContentMobileForm"><div class="ui-field-contain">
<label for="select-native-4">Version: 2019.3</label><select name="select-native-4" id="versionsSelectMobile"><option>Select a different version</option>
<optgroup id="versionsWithThisPageMobile" label="Versions with this page"></optgroup>
<optgroup id="versionsWithoutThisPageMobile" label="Versions without this page"></optgroup></select>
</div></form></div>
<div class="lang-switcher"><div class="current toggle" data-target=".lang-list">
<div class="lbl">Language
:                <span class="b">English</span>
</div>
<div class="arrow"></div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/android-gradle-overview.html">English</a></li>
<li><a href="/ja/current/Manual/android-gradle-overview.html">日本語</a></li>
<li><a href="/es/current/Manual/android-gradle-overview.html">Español</a></li>
<li><a href="/kr/current/Manual/android-gradle-overview.html">한국어</a></li>
<li><a href="/ru/current/Manual/android-gradle-overview.html">Русский</a></li>
</ul></div>
</div></div>
</div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManual.html">Unity User Manual (2019.3)</a></li>
<li><a href="PlatformSpecific.html">Platform development</a></li>
<li><a href="android.html"> Android</a></li>
<li><a href="android-BuildProcess.html"> Building apps for Android</a></li>
<li> Gradle for Android</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="AndroidMobileCustomizeSplashScreen.html"></a></span><div class="tip">Customizing an Android Splash Screen</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="android-manifest.html"></a></span><div class="tip"> Android Manifest</div>
</div>
</div></div>
<div id="_leavefeedback"></div>
<h1>Gradle for Android</h1>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>Gradle is an Android build system that automates a number of build processes, and prevents many common build errors. In Unity, <strong>Gradle</strong> reduces the method reference count in DEX (Dalvik Executable format) files, which means you are less likely to come across DEX limit problems.</p>

<p>Unity uses Gradle for all Android builds. You can either build the output package (.apk, .aab) in Unity, or export a Gradle project from Unity, and then build it with an external tool such as Android Studio.</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Unity version</strong></th>
	<th style="text-align:left;"><strong>Gradle version</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">2017.1, 2017.2</td>
	<td style="text-align:left;">2.14</td>
</tr>
<tr>
	<td style="text-align:left;">2017.4 up to and including 2017.4.16</td>
	<td style="text-align:left;">4.0.1</td>
</tr>
<tr>
	<td style="text-align:left;">2017., starting from 2017.4.17</td>
	<td style="text-align:left;">4.6</td>
</tr>
<tr>
	<td style="text-align:left;">2018.1</td>
	<td style="text-align:left;">4.0.1</td>
</tr>
<tr>
	<td style="text-align:left;">2018.2</td>
	<td style="text-align:left;">4.2.1</td>
</tr>
<tr>
	<td style="text-align:left;">2018.3, 2018.4 up to and including 2018.4.3f1, and 2019.1 up to and including 2019.1.6f1</td>
	<td style="text-align:left;">4.6</td>
</tr>
<tr>
	<td style="text-align:left;">2018.4 starting from 2018.4.4f1, 2019.1 starting from 2019.1.7f1, 2019.2, and 2019.3</td>
	<td style="text-align:left;">5.1.1</td>
</tr>
</tbody>
</table>

<p>To learn more about:</p>

<ul>
<li>Gradle, see the <a href="https://docs.gradle.org/current/userguide/userguide.html#getting-started">Gradle user manual</a>.</li>
<li>Building an output package (.apk), see Android developer documentation on <a href="https://developer.android.com/studio/build/index.html">configuring your build</a>.</li>
<li>Building an output package (.aab), see Android developer documentation on <a href="https://developer.android.com/guide/app-bundle/">Android app bundles</a>.</li>
</ul>

<h2>Building or exporting a Gradle project</h2>

<p>To build a Gradle project, follow these steps:</p>

<ol>
<li>In the Unity Editor, open the Build Settings for your Project (menu: <strong>File</strong> &gt; <strong>Build Settings</strong>).</li>
<li>In the <strong>Platform</strong> list, make sure that <strong>Android</strong> is selected as the Build target. If Android isn’t the current Build target, select it in the <strong>Platform</strong> list, then select the <strong>Switch Platform</strong> button.</li>
</ol>

<figure>
<img src="../uploads/Main/gradlebuildsettings.png" alt="Build settings for Android">
<figcaption>Build settings for Android</figcaption>
</figure>

<p>Select the:</p>

<ul>
<li>
<strong>Build</strong> button to generate an .<span class="tooltip"><strong>apk</strong><span class="tooltiptext">The Android Package format output by Unity. An APK is automatically deployed to your device when you select File &gt; Build &amp; Run. <a href="android-BuildProcess.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#APK">Glossary</a></span></span></span> file.</li>
<li>
<strong>Build and Run</strong> button to generate an .apk file, deploy it to a connected device, and run it.</li>
</ul>

<p>To export your Unity Project as a Gradle project, enable the <strong>Export Project</strong> setting, and then select the <strong>Export</strong> button. When you do this, Unity generates a Gradle project in the folder you specify, and doesn’t build an .apk file. Import this project into Android Studio or another external tool to make further changes, or to build it from there.</p>

<h2>Exported Gradle project structure</h2>

<p>Unity 2019.3 and newer versions create a Gradle project with two modules:</p>

<ul>
<li>
<strong>UnityLibrary</strong> module: Contains the Unity runtime and project data. This module is a library that you can integrate into any other Gradle project. You can use it to embed Unity into existing Android applications.</li>
<li>
<strong>Launcher</strong> module: Contains the application’s name and all of its icons. This is a simple Android application module that launches Unity. You can replace it with your own application.</li>
</ul>

<figure>
<img src="../uploads/Main/gradleprojectstructure.png" alt="Build settings for Android">
<figcaption>Build settings for Android</figcaption>
</figure>

<h2>build.gradle templates</h2>

<p>Gradle templates describe and configure how to build your Android app with Gradle. Each Gradle template represents a singleGradle project. Gradle projects can include, and depend on other Gradle projects.</p>

<p>A Gradle template consists of the following files:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>File</strong></th>
	<th style="text-align:left;"><strong>Location</strong></th>
	<th style="text-align:left;"><strong>Contains</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><em>baseProjectTemplate.gradle</em></td>
	<td style="text-align:left;">In the exported project, <em>root/build.gradle</em> folder</td>
	<td style="text-align:left;">Contains configuration that is shared between all other templates/Gradle projects (repositories and the dependency on the Android Gradle plug-in).</td>
</tr>
<tr>
	<td style="text-align:left;"><em>launcherTemplate.gradle</em></td>
	<td style="text-align:left;">In the exported project, <em>root/launcher/build.gradle folder</em>
</td>
	<td style="text-align:left;">Contains instructions on how to build the Android application (bundling, signing, APK splitting). It depends on the unityLibrary project and outputs either an .apk file or an app bundle.</td>
</tr>
<tr>
	<td style="text-align:left;"><em>mainTemplate.gradle</em></td>
	<td style="text-align:left;">In the exported project, <em>root/unityLibrary/build.gradle</em> folder</td>
	<td style="text-align:left;">Contains instructions on how to build Unity as a Library. Outputs an <em>.aar</em> file. You can override the Unity template with a custom template in the Unity Editor. See the <strong>Providing a custom Gradle build template </strong>section on this page for more details.</td>
</tr>
<tr>
	<td style="text-align:left;"><em>libTemplate.gradle</em></td>
	<td style="text-align:left;">Varies</td>
	<td style="text-align:left;">Used if your Unity Project contains <a href="AndroidAARPlugins.html">Android Library Projects</a> as <span class="tooltip"><strong>plug-ins</strong><span class="tooltiptext">A set of code created outside of Unity that creates functionality in Unity. There are two kinds of plug-ins you can use in Unity: Managed plug-ins (managed .NET assemblies created with tools like Visual Studio) and Native plug-ins (platform-specific native code libraries). <a href="Plugins.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#Plug-in">Glossary</a></span></span></span>.</td>
</tr>
</tbody>
</table>

<h2>Customizing your Gradle build</h2>

<p>You can provide a custom Gradle build template and select minification options in the <strong>Publishing Settings</strong> section of the <span class="tooltip"><strong>Player Settings</strong><span class="tooltiptext">Settings that let you set various player-specific options for the final game built by Unity. <a href="class-PlayerSettings.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#PlayerSettings">Glossary</a></span></span></span> window.</p>

<figure>
<img src="../uploads/Main/PublishingSettingsGradle.png" alt="Gradle-specific settings in the Publishing Settings section of the Player settings window">
<figcaption>Gradle-specific settings in the <strong>Publishing Settings</strong> section of the Player settings window</figcaption>
</figure>

<h3>Providing a custom Gradle build template</h3>

<p>You can use a custom <em>build.gradle</em> file for the <strong>unityLibrary</strong> module when you build the APK from Unity. This file contains specific build instructions specified in <strong>template variables</strong>. For a list of template variables, see the next section.</p>

<p>To use your own <em>build.gradle</em> file for the <strong>unityLibrary</strong> module, follow these steps:</p>

<ol>
<li>In the Unity Editor, open the <a href="http://mdeditor.infra.hq.unity3d.com/#class-PlayerSettingsAndroid">Player</a> settings (menu: <strong>Edit</strong> &gt; <strong>Project Settings</strong> &gt; <strong>Player</strong>), and select <strong>Android</strong>.</li>
<li>In the <strong>Publishing Settings</strong> section, enable the <strong>Custom Gradle Template</strong> setting.</li>
</ol>

<p>Unity then generates a default <em>mainTemplate.gradle</em> file in your Project’s <em>Assets/Plugins/Android/</em> folder. The path to the new file also appears under the <strong>Custom Gradle Template</strong> option in the Player Settings. Double-click the <em>mainTemplate.gradle</em> file in the <span class="tooltip"><strong>Project view</strong><span class="tooltiptext">A view that shows the contents of your Assets folder (Project tab) <a href="ProjectView.html">More info</a><br/><span class="tooltipGlossaryLink">See in <a href="Glossary.html#ProjectView">Glossary</a></span></span></span> to open it in an external text editor.</p>

<figure>
<img src="../uploads/Main/MainTemplateGradleFileN.png" alt="mainTemplate.gradle file in the Project view for the unityLibrary module">
<figcaption><em>mainTemplate.gradle</em> file in the Project view for the <strong>unityLibrary</strong> module</figcaption>
</figure>

<p>You can also create your own <em>settings.gradle</em> file. To do this, you need to manually create a <em>settingsTemplate.gradle</em> file in your Project’s <em>Assets/Plugins/Android/</em> folder. Unity uses this file to include your library projects. Unless you want to override this process, your file needs to contain this line:</p>

<pre><code>INCLUDES
</code></pre>

<p>Unity replaces this line with include directives to all of the Project’s libraries.</p>

<h2>IPostGenerateGradleAndroidProject</h2>

<p>
<a href="SciptRef:Android.IPostGenerateGradleAndroidProject.html">IPostGenerateGradleAndroidProject</a> returns the path to the <strong>unityLibrary</strong> module. This keeps everything similar to versions earlier than Unity 2019.3 and doesn’t require any further changes, which means Unity can reach the app’s manifest and resources in a consistent way across versions.</p>

<h3>Template variables</h3>

<p>The <em>mainTemplate.gradle</em> file can contain the following variables:</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong>Variable:</strong></th>
	<th style="text-align:left;"><strong>Description:</strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;">DEPS</td>
	<td style="text-align:left;">List of project dependencies; that is, the libraries that the Project uses.</td>
</tr>
<tr>
	<td style="text-align:left;">APIVERSION</td>
	<td style="text-align:left;">API version to build for (for example, 25).</td>
</tr>
<tr>
	<td style="text-align:left;">MINSDKVERSION</td>
	<td style="text-align:left;">Minimum API version (for example, 25).</td>
</tr>
<tr>
	<td style="text-align:left;">BUILDTOOLS</td>
	<td style="text-align:left;">SDK Build tools used (for example, 25.0.1).</td>
</tr>
<tr>
	<td style="text-align:left;">TARGETSDKVERSION</td>
	<td style="text-align:left;">API version to target (for example, 25).</td>
</tr>
<tr>
	<td style="text-align:left;">APPLICATIONID</td>
	<td style="text-align:left;">Android Application ID (for example, com.mycompany.myapp).</td>
</tr>
<tr>
	<td style="text-align:left;">MINIFY_DEBUG</td>
	<td style="text-align:left;">Enable minify for debug builds (true or false).</td>
</tr>
<tr>
	<td style="text-align:left;">PROGUARD_DEBUG</td>
	<td style="text-align:left;">Use proguard for minification in debug builds (true or false.)</td>
</tr>
<tr>
	<td style="text-align:left;">MINIFY_RELEASE</td>
	<td style="text-align:left;">Enable minify for release builds (true or false).</td>
</tr>
<tr>
	<td style="text-align:left;">PROGUARD_RELEASE</td>
	<td style="text-align:left;">Use proguard for minification in release builds (true or false).</td>
</tr>
<tr>
	<td style="text-align:left;">USER_PROGUARD</td>
	<td style="text-align:left;">Custom user proguard file (for example, <em>proguard-user.txt</em>).</td>
</tr>
<tr>
	<td style="text-align:left;">SIGN</td>
	<td style="text-align:left;">Complete the <code>signingConfigs</code> section if this build is signed.</td>
</tr>
<tr>
	<td style="text-align:left;">SIGNCONFIG</td>
	<td style="text-align:left;">Set to <code>signingConfig signingConfig.release</code> if this build is signed.</td>
</tr>
<tr>
	<td style="text-align:left;">DIR_GRADLEPROJECT</td>
	<td style="text-align:left;">The directory where Unity creates the Gradle project.</td>
</tr>
<tr>
	<td style="text-align:left;">DIR_UNITYPROJECT</td>
	<td style="text-align:left;">The directory of your Unity Project.</td>
</tr>
</tbody>
</table>

<h3>Minification</h3>

<p>You can use Proguard minification to shrink and optimize your app. To activate this option, follow these steps:</p>

<ol>
<li>Open the <a href="http://mdeditor.infra.hq.unity3d.com/#class-PlayerSettingsAndroid">Player</a> settings (menu: <strong>Edit</strong> &gt; <strong>Project Settings</strong> &gt; <strong>Player</strong>), and select <strong>Android</strong>.</li>
<li>In the <strong>Publishing Settings</strong> section, under <strong>Minify</strong>, select <strong>Proguard</strong> for either release builds, debug builds, or both.</li>
</ol>

<p>
<strong>Note:</strong> Proguard might strip out important code that your app needs, so use these options carefully.</p>

<p>To generate a custom <em>proguard.txt</em> file, enable the <strong>User Proguard File</strong> setting in the <strong>Publishing Settings</strong> section of the Player Settings. This immediately generates the <em>proguard.txt</em> file in your Project’s <em>Assets/Plugins/Android/</em> folder.</p>

<p>To learn more about ProGuard, see the <a href="https://www.guardsquare.com/en/products/proguard/manual/usage">ProGuard manual</a>.</p>

<h2>Errors when building with Gradle</h2>

<p>If an error occurs when you use Gradle to build your app for Android, Unity displays an error dialog box. Select the <strong>Troubleshoot</strong> button to open the <a href="http://mdeditor.infra.hq.unity3d.com/#android-gradle-troubleshooting">Gradle troubleshooting</a> Unity documentation in your system’s browser.</p>

<hr>

<ul>
<li>
<span class="page-history">Unity as a Library for Android added in <a href="https://docs.unity3d.com/Manual/30_search.html?q=newin20193">2019.3</a>.</span><span class="search-words">NewIn20193</span>
</li>
</ul>
<!-- area:platforms -->
<div id="_content"></div>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="AndroidMobileCustomizeSplashScreen.html"></a></span><div class="tip">Customizing an Android Splash Screen</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="android-manifest.html"></a></span><div class="tip"> Android Manifest</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2020 Unity Technologies. Publication Date: 2020-04-07.</div>
<div class="menu">
<a href="https://learn.unity.com/">Tutorials</a><a href="https://answers.unity3d.com">Community Answers</a><a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a><a href="https://forum.unity3d.com">Forums</a><a href="https://unity3d.com/asset-store">Asset Store</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
